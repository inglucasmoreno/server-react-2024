import{a as J,b as K,c as W}from"./chunk-4DSAFTCP.js";import{a as H}from"./chunk-HHPOYUW2.js";import{a as Q}from"./chunk-AJIAZPWK.js";import{a as $}from"./chunk-EFV24HPR.js";import{b as T,c as z,d as B,f as V,o as O,r as N}from"./chunk-K72LVKCT.js";import{a as R}from"./chunk-KF5TR6KZ.js";import{a as q}from"./chunk-ACHIUSDU.js";import{Ba as s,Ca as E,Oa as g,Ra as l,Ua as e,Va as n,Wa as c,Za as j,aa as S,ab as v,bb as u,cb as G,da as M,db as F,hb as U,ib as m,ka as _,kb as h,la as f,ma as p,na as y,nb as w,pb as k,qb as I,rb as L,tb as P,ub as D}from"./chunk-KLG2F6FQ.js";var ee=["*"],X=(()=>{let r=class r{constructor(){}ngOnInit(){R.from(".gsap-contenido",{y:100,opacity:0,duration:.2})}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=S({type:r,selectors:[["app-tarjeta-lista"]],standalone:!0,features:[w],ngContentSelectors:ee,decls:3,vars:0,consts:[[1,"gsap-contenido","p-4","container","mr-auto","ml-auto"],[1,"antialiased","font-sans","shadow","border","border-gray-300","rounded-t","bg-white"]],template:function(a,d){a&1&&(G(),e(0,"div",0)(1,"div",1),F(2),n()())},encapsulation:2});let t=r;return t})();var ie=(t,r)=>({"bg-green-700":t,"bg-red-700":r}),Y=(()=>{let r=class r{constructor(){this.activo=!0}ngOnInit(){}};r.\u0275fac=function(a){return new(a||r)},r.\u0275cmp=S({type:r,selectors:[["app-pastilla-estado"]],inputs:{activo:"activo"},standalone:!0,features:[w],decls:4,vars:5,consts:[[1,"relative","inline-block","hover:opacity-90","px-3","py-1","text-white","font-semibold","leading-tight","cursor-pointer"],["ria-hidden","",1,"absolute","inset-0","rounded-full",3,"ngClass"],[1,"relative"]],template:function(a,d){a&1&&(e(0,"span",0),c(1,"span",1),e(2,"span",2),m(3),n()()),a&2&&(s(),l("ngClass",I(2,ie,d.activo,!d.activo)),s(2),h(" ",d.activo?"Activo":"Inactivo",""))},dependencies:[V,T],encapsulation:2});let t=r;return t})();var Z=(()=>{let r=class r{transform(o,a,d){let x,b;return d==="true"?x=!0:d==="false"?x=!1:x=null,x!==null?b=o.filter(C=>C.activo==x):x===null&&(b=o),a=a.toLocaleLowerCase(),a.length!==0?b.filter(C=>C.apellido.toLocaleLowerCase().includes(a)||C.nombre.toLocaleLowerCase().includes(a)||C.usuario.toLocaleLowerCase().includes(a)):b}};r.\u0275fac=function(a){return new(a||r)},r.\u0275pipe=M({name:"filtroUsuarios",type:r,pure:!0,standalone:!0});let t=r;return t})();var ne=(t,r)=>({itemsPerPage:t,currentPage:r}),re=t=>({"bg-indigo-50":t}),ae=t=>["/dashboard/usuarios/editar",t],oe=t=>["/dashboard/usuarios/password",t],se=t=>["/dashboard/usuarios/permisos",t];function le(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function ce(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function pe(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function me(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function de(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function ue(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function _e(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function fe(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function ge(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function ve(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function xe(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function he(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function be(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function Se(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function ye(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function we(t,r){t&1&&(p(),e(0,"svg",45),c(1,"polyline",46),n())}function Ce(t,r){t&1&&(p(),e(0,"svg",47),c(1,"polyline",48),n())}function Ee(t,r){t&1&&(p(),e(0,"svg",49),c(1,"line",50),n())}function ke(t,r){t&1&&(e(0,"div",66),m(1," E "),n())}function je(t,r){t&1&&(e(0,"div",67),m(1," A "),n())}function Ie(t,r){if(t&1){let i=j();e(0,"tr",51)(1,"td",52)(2,"div",53),g(3,ke,2,0,"div",54)(4,je,2,0,"div",55),n()(),e(5,"td",52)(6,"p",56),m(7),n()(),e(8,"td",52)(9,"p",56),m(10),n()(),e(11,"td",52)(12,"p",53),m(13),n()(),e(14,"td",52)(15,"p",53),m(16),n()(),e(17,"td",52)(18,"app-pastilla-estado",57),v("click",function(){let a=_(i).$implicit,d=u(2);return f(d.actualizarEstado(a))}),n()(),e(19,"td",58)(20,"p",59)(21,"button",60),p(),e(22,"svg",8),c(23,"path",61),n()(),y(),e(24,"button",62),p(),e(25,"svg",8),c(26,"path",63),n()(),y(),e(27,"button",64),p(),e(28,"svg",8),c(29,"path",65),n()()()()()}if(t&2){let i=r.$implicit,o=u(2);l("ngClass",k(11,re,o.authService.usuario.userId===i.id)),s(3),l("ngIf",i.role=="USER_ROLE"),s(),l("ngIf",i.role=="ADMIN_ROLE"),s(3),h(" ",i.apellido.toLowerCase()," "),s(3),h(" ",i.nombre.toLowerCase()," "),s(3),h(" ",i.dni," "),s(3),h(" ",i.usuario," "),s(2),l("activo",i.activo),s(3),l("routerLink",k(13,ae,i.id)),s(3),l("routerLink",k(15,oe,i.id)),s(3),l("routerLink",k(17,se,i.id))}}function Te(t,r){if(t&1){let i=j();e(0,"div",68)(1,"pagination-controls",69),v("pageChange",function(a){_(i);let d=u(2);return f(d.paginaActual=a)}),n()()}}function Ve(t,r){if(t&1){let i=j();e(0,"app-tarjeta-lista")(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2",6),m(5," Listado de usuarios "),n(),e(6,"p"),m(7),n()(),e(8,"div")(9,"button",7),p(),e(10,"svg",8),c(11,"path",9),n()()()(),y(),e(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"select",15,0),v("change",function(){_(i);let a=U(18),d=u();return f(d.filtrarActivos(a.value))}),e(19,"option",16),m(20," Activos "),n(),e(21,"option",17),m(22," Inactivos "),n(),e(23,"option",18),m(24," Todos "),n()(),e(25,"div",19),p(),e(26,"svg",20),c(27,"path",21),n()()()(),y(),e(28,"div",22)(29,"span",23),p(),e(30,"svg",24),c(31,"path",25),n()(),y(),e(32,"input",26,1),v("keyup",function(){_(i);let a=U(33),d=u();return f(d.filtrarParametro(a.value))}),n()(),e(34,"select",27)(35,"option",28),m(36," 10 elementos "),n(),e(37,"option",29),m(38," 20 elementos "),n(),e(39,"option",30),m(40," 50 elementos "),n(),e(41,"option",31),m(42," 100 elementos "),n()()()(),e(43,"div",32)(44,"div",33)(45,"table",34)(46,"thead")(47,"tr")(48,"th",35)(49,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("role"))}),e(50,"span"),m(51," Tipo "),n(),e(52,"span",37),g(53,le,2,0,"svg",38)(54,ce,2,0,"svg",39)(55,pe,2,0,"svg",40),n()()(),e(56,"th",35)(57,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("apellido"))}),e(58,"span"),m(59," Apellido "),n(),e(60,"span",37),g(61,me,2,0,"svg",38)(62,de,2,0,"svg",39)(63,ue,2,0,"svg",40),n()()(),e(64,"th",35)(65,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("nombre"))}),e(66,"span"),m(67," Nombre "),n(),e(68,"span",5),g(69,_e,2,0,"svg",38)(70,fe,2,0,"svg",39)(71,ge,2,0,"svg",40),n()()(),e(72,"th",41)(73,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("dni"))}),e(74,"span"),m(75," DNI "),n(),e(76,"span",5),g(77,ve,2,0,"svg",38)(78,xe,2,0,"svg",39)(79,he,2,0,"svg",40),n()()(),e(80,"th",35)(81,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("usuario"))}),e(82,"span"),m(83," Usuario "),n(),e(84,"span",5),g(85,be,2,0,"svg",38)(86,Se,2,0,"svg",39)(87,ye,2,0,"svg",40),n()()(),e(88,"th",42)(89,"div",36),v("click",function(){_(i);let a=u();return f(a.ordenarPorColumna("activo"))}),e(90,"span"),m(91," Estado "),n(),e(92,"span",5),g(93,we,2,0,"svg",38)(94,Ce,2,0,"svg",39)(95,Ee,2,0,"svg",40),n()()(),e(96,"th",42),m(97," Acci\xF3n "),n()()(),e(98,"tbody"),g(99,Ie,30,19,"tr",43),L(100,"filtroUsuarios"),L(101,"paginate"),n()()()()(),g(102,Te,2,0,"div",44),n()()}if(t&2){let i=u();s(7),h(" Total de usuarios: ",i.usuarios.length," "),s(46),l("ngIf",i.ordenar.columna=="role"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="role"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="role"),s(6),l("ngIf",i.ordenar.columna=="apellido"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="apellido"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="apellido"),s(6),l("ngIf",i.ordenar.columna=="nombre"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="nombre"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="nombre"),s(6),l("ngIf",i.ordenar.columna=="dni"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="dni"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="dni"),s(6),l("ngIf",i.ordenar.columna=="usuario"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="usuario"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="usuario"),s(6),l("ngIf",i.ordenar.columna=="activo"&&i.ordenar.direccion==1),s(),l("ngIf",i.ordenar.columna=="activo"&&i.ordenar.direccion==-1),s(),l("ngIf",i.ordenar.columna!="activo"),s(4),l("ngForOf",P(101,25,D(100,21,i.usuarios,i.filtro.parametro,i.filtro.activo),I(28,ne,i.cantidadItems,i.paginaActual))),s(3),l("ngIf",i.usuarios.length>i.cantidadItems)}}var et=(()=>{let r=class r{constructor(o,a,d,x){this.usuariosService=o,this.alertService=a,this.dataService=d,this.authService=x,this.permiso_escritura=["USUARIOS_ALL"],this.total=0,this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:1,columna:"apellido"}}ngOnInit(){console.log(this.authService.usuario),this.dataService.ubicacionActual="Dashboard - Usuarios",this.alertService.loading(),this.listarUsuarios()}listarUsuarios(){this.usuariosService.listarUsuarios(this.ordenar.direccion,this.ordenar.columna).subscribe({next:o=>{let{usuarios:a,total:d}=o;this.usuarios=a,this.total=d,this.alertService.close()},error:({error:o})=>this.alertService.errorApi(o.message)})}actualizarEstado(o){let{id:a,activo:d}=o;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:x})=>{x&&(this.alertService.loading(),this.usuariosService.actualizarUsuario(a,{activo:!d}).subscribe(()=>{this.alertService.loading(),this.listarUsuarios()},({error:b})=>{this.alertService.close(),this.alertService.errorApi(b.message)}))})}filtrarActivos(o){this.paginaActual=1,this.filtro.activo=o}filtrarParametro(o){this.paginaActual=1,this.filtro.parametro=o}ordenarPorColumna(o){this.ordenar.columna=o,this.ordenar.direccion=this.ordenar.direccion==1?-1:1,this.alertService.loading(),this.listarUsuarios()}};r.\u0275fac=function(a){return new(a||r)(E(Q),E($),E(q),E(H))},r.\u0275cmp=S({type:r,selectors:[["app-usuarios"]],standalone:!0,features:[w],decls:1,vars:1,consts:[["txtActivo",""],["txtParametro",""],[4,"ngIf"],[1,"max-w-full","mx-auto"],[1,"flex","items-center","w-full","justify-between","bg-gray-800","text-white","px-4","py-3","rounded-t"],[1,"ml-2"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nuevo usuario","routerLink","/dashboard/usuarios/nuevo",1,"boton-nuevo-header","mr-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"py-4","px-4","text-sm"],[1,"md:flex","md:items-center","md:justify-between"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative","mt-1","md:mt-0"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondaryColor"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],[1,"md:ml-2","mt-2","md:mt-0","w-max","outline-none","p-2","md:p-1","bg-white","border","border-gray-400","rounded"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"-mx-4","sm:-mx-8","px-4","sm:px-8","py-4","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","border","border-gray-200","min-w-full","shadow","rounded-lg"],[1,"min-w-full","leading-normal"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-600","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-600","tracking-wider"],["class","animate__animated animate__fadeIn",3,"ngClass",4,"ngFor","ngForOf"],["class","px-5 py-5 bg-white border-t text-sm flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"animate__animated","animate__fadeIn",3,"ngClass"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","whitespace-no-wrap"],["class","bg-orange-100 flex items-center font-semibold text-orange-500 text-2xl justify-center w-10 h-10 rounded-full shadow border border-orange-300","src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",4,"ngIf"],["class","bg-blue-100 flex items-center font-semibold text-blue-900 text-2xl justify-center w-10 h-10 rounded-full shadow border border-blue-300","src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",4,"ngIf"],[1,"text-gray-900","whitespace-no-wrap","capitalize"],[3,"click","activo"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar usuario",1,"boton-editar","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["title","Actualizar contrase\xF1a",1,"p-2","rounded","shadow","focus:outline-none","bg-fuchsia-600","hover:opacity-90","text-white","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"],["title","Permisos de usuario",1,"p-2","rounded","shadow","bg-blue-600","hover:opacity-90","text-white","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"],["src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",1,"bg-orange-100","flex","items-center","font-semibold","text-orange-500","text-2xl","justify-center","w-10","h-10","rounded-full","shadow","border","border-orange-300"],["src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",1,"bg-blue-100","flex","items-center","font-semibold","text-blue-900","text-2xl","justify-center","w-10","h-10","rounded-full","shadow","border","border-blue-300"],[1,"px-5","py-5","bg-white","border-t","text-sm","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(a,d){a&1&&g(0,Ve,103,31,"app-tarjeta-lista",2),a&2&&l("ngIf",d.usuarios)},dependencies:[V,T,z,B,X,N,O,Y,Z,W,J,K],encapsulation:2});let t=r;return t})();export{et as default};
